{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imprimir Etiqueta - {{ usuario.nombre }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0; /* Color de fondo para ver la etiqueta */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .printable-tag {
            /* Tamaño 100mm x 50mm (10cm x 5cm) */
            width: 10cm;
            height: 5cm;
            padding: 0.15in; /* Reducido un poco el padding para dar más espacio */
            box-sizing: border-box;
            
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 10px;
            
            display: flex;
            align-items: center;
            gap: 15px;
            
            /* Sombra para visualización en pantalla */
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .tag-logo {
            height: 1.1in; /* Ligeramente más pequeño para el nuevo alto */
            width: 1.1in;
            object-fit: contain;
        }

        .tag-info {
            flex-grow: 1;
            text-align: left;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .tag-info h4 {
            font-size: 15pt; /* Un poco más pequeño para que quepa bien */
            font-weight: 700;
            margin: 0 0 4px 0;
            line-height: 1.2;
        }

        .tag-info p {
            margin: 0 0 6px 0; /* Menos margen inferior */
            font-size: 9.5pt;
            color: #555;
        }

        .tag-info .asistencias {
            font-size: 18pt; /* Tamaño aumentado para mayor visibilidad */
            color: #007bff;
            font-weight: 700; /* Texto más grueso */
            display: flex;
            align-items: center;
            gap: 8px; /* Espacio entre el ícono y el número */
        }

        @media print {
            @page {
                /* Elimina los encabezados y pies de página del navegador (URL, fecha, etc.) */
                margin: 0;
            }

            body {
                background-color: #fff; /* Fondo blanco para impresión */
            }
            .printable-tag {
                box-shadow: none; /* Sin sombra al imprimir */
                border: 1px dashed #999; /* Borde punteado para guía de corte */
                margin: 0;
            }
        }
    </style>
</head>
<body>
    <div class="printable-tag">
        <img src="{% static 'img/logo_etiqueta.jpg' %}" alt="Logo Inacap" class="tag-logo">
        <div class="tag-info">
            <h4>{{ usuario.nombre }}<br>{{ usuario.apellido }}</h4>
            {% if usuario.carrera %}<p>{{ usuario.get_carrera_real_display }}</p>{% endif %}
            <p class="asistencias">
                <i class="bi bi-calendar-check-fill"></i> 
                {{ usuario.cantidad_asistencias }}
            </p>
        </div>
    </div>

    <script>
        // Llama al diálogo de impresión tan pronto como la página y sus recursos (imágenes, estilos) se hayan cargado.
        window.onload = function() {
            // 1. Llama al diálogo de impresión.
            window.print();

            // 2. Define qué hacer después de que el diálogo de impresión se cierre (ya sea imprimiendo o cancelando).
            window.onafterprint = function() {
                // 3. Cierra la ventana actual.
                window.close();
            };
        };
    </script>
</body>
</html>